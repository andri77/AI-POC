"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProjectBundle = void 0;
class ProjectBundle {
    project;
    data;
    constructor(project, data) {
        this.project = project;
        this.data = data;
    }
    synthesizeRecord(record) {
        return Object.entries(record)
            .map(([key, { construct, bundle }]) => ({
            logicalId: key,
            type: construct.type,
            physicalId: construct.physicalId,
            member: construct.member,
            payload: bundle.synthesize(),
        }));
    }
    synthesize() {
        return {
            ...this.project.synthesize(),
            resources: [
                // The order in which resources are defined here is important. If
                // resource A may include references to resource B, it should occur
                // later than resource B.
                ...this.synthesizeRecord(this.data['status-page-service']),
                ...this.synthesizeRecord(this.data['status-page']),
                ...this.synthesizeRecord(this.data['check-group']),
                ...this.synthesizeRecord(this.data.check),
                ...this.synthesizeRecord(this.data['alert-channel']),
                ...this.synthesizeRecord(this.data['alert-channel-subscription']),
                ...this.synthesizeRecord(this.data['maintenance-window']),
                ...this.synthesizeRecord(this.data['private-location']),
                ...this.synthesizeRecord(this.data['private-location-check-assignment']),
                ...this.synthesizeRecord(this.data['private-location-group-assignment']),
                ...this.synthesizeRecord(this.data.dashboard),
            ],
        };
    }
}
exports.ProjectBundle = ProjectBundle;
//# sourceMappingURL=project-bundle.js.map